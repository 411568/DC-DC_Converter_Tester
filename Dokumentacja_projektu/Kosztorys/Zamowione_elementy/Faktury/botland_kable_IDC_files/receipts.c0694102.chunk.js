(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[4],{23:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(6),i=a.n(c),s=(a(23),a(7)),o=a.n(s),l=a(9),u=a(3),d=a(0);function j(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("img",{className:"logotype",src:"https://static.eparagony.pl/spark-static/eparagony-logo-color.svg",alt:"Logotyp eparagony.pl"}),Object(d.jsx)("p",{className:"paragraph",children:"Pierwszy i najwi\u0119kszy w Polsce HUB eparagon\xf3w fiskalnych."})]})}function b(e){var t=e.isAutoRefreshEnabled;return Object(d.jsx)("div",{className:"loader",children:t?Object(d.jsx)("span",{children:"Oczekiwanie na e-paragon\u2026"}):Object(d.jsxs)("span",{children:["Sprzedawca jeszcze nie wystawi\u0142 Twojego ",Object(d.jsx)("span",{className:"nowrap",children:"e-dokumentu"}),".",Object(d.jsx)("br",{}),"Sprawd\u017a ponownie p\xf3\u017aniej."]})})}function m(e){var t=e.displayPlaceholder,a=e.isAutoRefreshEnabled;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"block-ereceipt",children:t&&Object(d.jsx)(b,{isAutoRefreshEnabled:a})}),Object(d.jsxs)("div",{className:"block-info",children:[Object(d.jsx)("div",{}),Object(d.jsx)("div",{className:"info-getapp desktop",children:Object(d.jsx)(j,{})})]})]})}function p(e){var t=e.children;return Object(d.jsxs)(d.Fragment,{children:[t,Object(d.jsxs)("p",{className:"paragraph",children:["B\u0105d\u017a eko i nie drukuj faktur! Pami\u0119taj, \u017ce Twojej ksi\u0119gowo\u015bci wystarczy r\xf3wnie\u017c link do"," ",Object(d.jsx)("span",{className:"nowrap",children:"e\u2013faktury"}),", aby j\u0105 rozliczy\u0107."]})]})}var f=a(4),h=a.n(f),O=a.p+"static/media/close_black_24dp.4dc23c11.svg",x=a.p+"static/media/icon-info-gray.fdc7e399.svg",g=a.p+"static/media/icon-info-white_red.a1098c14.svg",k=a.p+"static/media/icon-print-black-24dp.fdda633d.svg",v=a.p+"static/media/icon-print-white-24dp.5b8f200e.svg",y=function(e){var t=e.onClose,a=e.isVisible,r=e.children,c=Object(n.useCallback)((function(e){return e.stopPropagation()}),[]),i=h()("overlay",{"visually-hidden":!a});return Object(d.jsx)("div",{className:i,onClick:t,children:Object(d.jsxs)("div",{className:"modal",onClick:c,children:[Object(d.jsx)("div",{className:"modal-close",onClick:t,children:Object(d.jsx)("img",{src:O,alt:"Zamknij"})}),r,Object(d.jsx)("div",{className:"modal-footer",children:Object(d.jsx)(j,{})})]})})},w=function(e){var t=e.merchantName,a=e.createdAtIsoString,n=e.createdAtLocaleString,r=e.onPrintClick,c=e.onModalOpen,i=e.displayPrintButton,s=e.moreInfoIconAlt,o=e.children;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"main-header",children:[Object(d.jsx)("h2",{className:"header-text bold",children:o}),Object(d.jsx)("span",{className:"subheader-text mobile",children:t&&Object(d.jsxs)(d.Fragment,{children:[t," \u2022 ",Object(d.jsx)("time",{dateTime:a,children:n})]})})]}),Object(d.jsxs)("div",{className:"main-header-buttons",children:[i&&Object(d.jsx)("div",{className:"button-print mobile",children:Object(d.jsxs)("button",{onClick:r,children:[Object(d.jsx)("img",{src:k,alt:"Ikona drukarki"}),"Drukuj"]})}),Object(d.jsx)("div",{className:"main-more mobile",onClick:c,children:Object(d.jsx)("img",{className:"icon-action",src:g,alt:s})})]})]})},N=function(e){var t=e.items;return Object(d.jsx)("table",{className:"summary desktop",children:Object(d.jsx)("tbody",{children:t.filter((function(e){var t=e.value;return"number"===typeof t||"string"===typeof t&&t.length>0})).map((function(e){var t=e.label,a=e.value,n=e.wrapLabel;return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{className:h()({"summary-cell":!0,nowrap:!0!==n}),children:t}),Object(d.jsx)("td",{className:"summary-cell cell-data bold",children:a})]},t)}))})})};function A(){return Object(d.jsx)("div",{className:"info-getapp desktop",children:Object(d.jsx)(j,{})})}var S=function(e){var t=e.frameUrl,a=e.merchantName,r=e.createdAtIsoString,c=e.createdAtLocaleString,i=e.items,s=e.title,o=e.displayPrintButton,l=void 0!==o&&o,j=e.renderInfo,m=e.moreInfoIconAlt,p=e.isFiscalDocumentAvailable,f=e.isAutoRefreshEnabled,h=e.renderMobileOverlayContent,O=Object(n.useState)(!1),g=Object(u.a)(O,2),k=g[0],S=g[1],I=Object(n.useCallback)((function(){return S(!0)}),[S]),z=Object(n.useCallback)((function(){return S(!1)}),[S]),T=Object(n.useRef)(null),F=Object(n.useCallback)((function(){T&&T.current&&function(e,t){e.contentWindow&&e.contentWindow.postMessage({type:"print"},t)}(T.current,t)}),[t]);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"block-ereceipt",children:p?Object(d.jsx)("iframe",{ref:T,title:"e-dokument",className:"receipt-frame",src:t,height:"100%",width:"100%",frameBorder:"0"}):Object(d.jsx)(b,{isAutoRefreshEnabled:f})}),Object(d.jsxs)("div",{className:"block-info",children:[Object(d.jsxs)("div",{className:"info-main",children:[Object(d.jsx)(w,{merchantName:a,createdAtIsoString:r,createdAtLocaleString:c,onModalOpen:I,onPrintClick:F,displayPrintButton:l,moreInfoIconAlt:m,children:s}),Object(d.jsx)(N,{items:i}),l&&Object(d.jsx)("div",{className:"button-print desktop",children:Object(d.jsxs)("button",{onClick:F,children:[Object(d.jsx)("img",{src:v,alt:"Ikona drukarki"}),"Drukuj faktur\u0119"]})}),Object(d.jsxs)("div",{className:"about-ereceipt desktop",children:[Object(d.jsx)("img",{className:"icon-action",src:x,alt:m}),j(F)]})]}),Object(d.jsx)(A,{})]}),Object(d.jsx)(y,{isVisible:k,onClose:z,children:h(F)})]})};function I(e){var t=e.frameUrl,a=e.documentData,n=e.isAutoRefreshEnabled;return Object(d.jsx)(S,{frameUrl:t,isAutoRefreshEnabled:n,isFiscalDocumentAvailable:a.isFiscal,title:Object(d.jsxs)(d.Fragment,{children:["Twoja ",Object(d.jsx)("span",{className:"nowrap",children:"e-faktura"})]}),displayPrintButton:!0,renderInfo:function(){return Object(d.jsx)(p,{children:Object(d.jsxs)("p",{className:"paragraph",children:["Aby pobra\u0107 ",Object(d.jsx)("span",{className:"nowrap",children:"e\u2013faktur\u0119"})," w formacie PDF, kliknij w przycisk powy\u017cej i zmie\u0144 ustawienia drukowania na ",Object(d.jsx)("span",{className:"nowrap",children:"\u201eZapisz do PDF\u201d"}),"."]})})},moreInfoIconAlt:"Wi\u0119cej informacji o e-fakturze",merchantName:a.taxpayerName,createdAtIsoString:a.createdAtIsoString,createdAtLocaleString:a.createdAtLocaleString,items:[{label:"Numer faktury",value:a.invoiceNumber},{label:"Sprzedawca",value:a.taxpayerName},{label:"Nabywca",value:a.consumerName},{label:"NIP nabywcy",value:a.consumerTIN},{label:"Data",value:a.createdAtLocaleString},{label:"Numer zam\xf3wienia",value:a.orderId},{label:"Suma netto",value:a.netSaleValue},{label:"VAT",value:a.taxTotalValue},{label:"Suma brutto",value:a.grossSaleValue}],renderMobileOverlayContent:function(){return Object(d.jsx)("div",{className:"about-ereceipt",children:Object(d.jsx)(p,{children:Object(d.jsxs)("p",{className:"paragraph",children:["Aby pobra\u0107 ",Object(d.jsx)("span",{className:"nowrap",children:"e\u2013faktur\u0119"})," w formacie PDF, kliknij w przycisk \u201eDrukuj\u201d a nast\u0119pnie wybierz opcj\u0119 zapisu jako plik PDF."]})})})}})}var z=a(8),T=function(e){var t=e.fileData,a=e.fileName,r=e.value,c=Object(n.useCallback)((function(){var e=JSON.stringify(t,null,2),n=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(n),c=document.createElement("a");c.href=r,c.setAttribute("download",a),c.click(),URL.revokeObjectURL(r)}),[t,a]);return Object(d.jsx)("button",{type:"button",onClick:c,className:"link-button link",children:r})};function F(e){var t=e.onPrintClick,a=e.crkDocumentContent,n=e.resourceToken;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("p",{className:"paragraph",children:["Tw\xf3j ",Object(d.jsx)("span",{className:"nowrap",children:"eparagon"})," zosta\u0142 wydany i pobrany bezpo\u015brednio z urz\u0105dzenia fiskalnego sprzedawcy, co gwarantuje jego autentyczno\u015b\u0107 i niezmienno\u015b\u0107. Dost\u0119p do oryginalnego dokumentu masz zawsze, niezale\u017cnie od sprzedawcy",a&&Object(d.jsxs)(d.Fragment,{children:[" ","(",Object(d.jsx)(T,{fileData:a,fileName:C(n),value:"plik"}),")"]}),"","."]}),Object(d.jsxs)("p",{className:"paragraph",children:["B\u0105d\u017a eko i nie drukuj! Je\u017celi jednak potrzebujesz wydruku"," ",Object(d.jsx)(z.a,{value:"kliknij tutaj",className:"paragraph-link",onClick:t}),"."]})]})}function C(e){return"".concat(e.slice(0,20),".json")}function D(e){var t=e.frameUrl,a=e.documentData,n=e.resourceToken,r=e.isAutoRefreshEnabled;return Object(d.jsx)(S,{frameUrl:t,isAutoRefreshEnabled:r,isFiscalDocumentAvailable:a.isFiscal,title:Object(d.jsxs)(d.Fragment,{children:["Tw\xf3j ",Object(d.jsx)("span",{className:"nowrap",children:"eparagon"})]}),renderInfo:function(e){return Object(d.jsx)(F,{onPrintClick:e,crkDocumentContent:a.crkDocumentContent,resourceToken:n})},moreInfoIconAlt:"Wi\u0119cej informacji o eparagonie",merchantName:a.merchantName,createdAtIsoString:a.createdAtIsoString,createdAtLocaleString:a.createdAtLocaleString,items:[{label:"Data i godzina",value:a.createdAtLocaleString},{label:"Sprzedawca",value:a.merchantName},{label:"Numer zam\xf3wienia",value:a.orderId,wrapLabel:!0},{label:"Kwota",value:"".concat(a.grossSaleValue," z\u0142")}],renderMobileOverlayContent:function(e){return Object(d.jsx)("div",{className:"about-ereceipt",children:Object(d.jsx)(F,{onPrintClick:e,resourceToken:n})})}})}var R=a(2);function P(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var E=new Intl.DateTimeFormat("pl",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),V=new Intl.DateTimeFormat("pl",{day:"numeric",month:"long",year:"numeric"});function L(e){return"string"===typeof e&&e.length>0?parseFloat(e).toFixed(2).replace(".",","):""}function U(e){return new URL("/documents/resource/".concat(B(),"/").concat(e),"https://api.eparagony.pl").toString()}function B(){var e,t=/\/view\/(\w+)/.exec(document.location.href);return null!==(e=null===t||void 0===t?void 0:t[1])&&void 0!==e?e:"void"}function M(){return document.location.search.includes("autoRefresh=true")}var Z=["grossSaleValue","createdAtTimeZone","documentType"],J=["netSaleValue","taxTotalValue","grossSaleValue","createdAtTimeZone","documentType"];function W(e){var t=e.grossSaleValue,a=e.createdAtTimeZone,n=(e.documentType,P(e,Z));return Object(R.a)(Object(R.a)({},n),{},{createdAtIsoString:a,createdAtLocaleString:E.format(new Date(a)),grossSaleValue:L(t)})}function _(e){var t=e.netSaleValue,a=e.taxTotalValue,n=e.grossSaleValue,r=e.createdAtTimeZone,c=(e.documentType,P(e,J));return Object(R.a)(Object(R.a)({},c),{},{createdAtIsoString:r,createdAtLocaleString:V.format(new Date(r)),netSaleValue:L(t),taxTotalValue:L(a),grossSaleValue:L(n)})}function G(){var e=Object(n.useState)({waitingForFirstResponse:!0}),t=Object(u.a)(e,2),a=t[0],r=t[1],c=a.type,i=a.data,s=a.waitingForFirstResponse;Object(n.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(U("info"),{method:"GET",mode:"cors"});case 2:if((t=e.sent).ok){e.next=7;break}return r({waitingForFirstResponse:!1}),n(),e.abrupt("return");case 7:return e.next=9,t.json();case 9:a(e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(e){"RECEIPT"===e.documentType?r({type:e.documentType,data:W(e),waitingForFirstResponse:!1}):"INVOICE"===e.documentType&&r({type:e.documentType,data:_(e),waitingForFirstResponse:!1}),e.isFiscal||n()}function n(){M()&&setTimeout(e,100)}e().catch((function(e){return console.error(e)}))}),[]);var j=M();return"RECEIPT"===c?Object(d.jsx)(D,{frameUrl:U("html"),documentData:i,resourceToken:B(),isAutoRefreshEnabled:j}):"INVOICE"===c?Object(d.jsx)(I,{frameUrl:U("html"),documentData:i,isAutoRefreshEnabled:j}):Object(d.jsx)(m,{displayPlaceholder:!s,isAutoRefreshEnabled:j})}i.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(G,{})}),document.getElementById("root"))},8:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(2),r=a(1),c=a(0);function i(e){var t=e.href,a=e.value,i=e.className,s=e.onClick,o=Object(r.useCallback)((function(e){s&&(e.preventDefault(),s())}),[s]),l=s?{onClick:o,href:"#"}:{};return Object(c.jsx)("a",Object(n.a)(Object(n.a)({className:"underline text-color-default ".concat(i),href:t},l),{},{children:a}))}}},[[24,7,0,1]]]);
//# sourceMappingURL=receipts.c0694102.chunk.js.map